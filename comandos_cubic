#ACTUALIZACIÓN BASE
sudo apt update;
sudo apt upgrade -y;
sudo apt dist-upgrade -y;
sudo apt autoremove -y;
sudo apt clean -y;

#REPOSITORIOS EXTRA
add-apt-repository ppa:mozillateam/ppa -y
add-apt-repository ppa:libreoffice/ppa -y
apt-add-repository ppa:yktooo/ppa -y
add-apt-repository ppa:openshot.developers/ppa -y
add-apt-repository ppa:danielrichter2007/grub-customizer -y;
add-apt-repository ppa:stellarium/stellarium-releases -y;
add-apt-repository ppa:epoptes -y;



#PAQUETES A ENGADIR
wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb;
gdebi --non-interactive google-chrome*.deb;
apt install -y google-earth-pro-stable;
apt install rar p7zip-rar fonts-crosextra-carlito fonts-crosextra-caladea openshot-qt python3-openshot wine stellarium
apt install mint-meta-codecs ktechlab inkscape gimp vlc synaptic indicator-sound-switcher ttf-mscorefonts-installer audacity openboard poedit thonny arduino
apt install vlc fritzing logisim mate-tweak hardinfo inxi xfburn krop epoptes-client
apt install -y grub-customizer
apt install ubuntu-mate-themes mate-themes
apt install -y lightdm-gtk-greeter-settings

#PAQUETES A BORRAR
apt purge transmission-gtk hexchat hypnotix;
apt purge orca speech-dispatcher;
apt purge -y slick-greeter lightdm-settings;
apt purge -y webapp-manager;
apt purge -y brltty; #habilita o uso de determinadas placas de Arduino

#CONFIGURAR O LIGHTDM-GTK-GREETER
#editar /etc/lightdm/lightdm-gtk-greeter e engadir:
[greeter]
background = /opt/ubuntu-mate-edu.png
theme-name = Ambiant-MATE
icon-theme-name = Ambiant-MATE
indicators = ~host;~spacer;~clock;~spacer;~language;~power
clock-format = %a %d %b, %H:%M
default-user-image = /usr/share/icons/menta/256x256/status/avatar-default.png
user-background = false

#INSTALAR GEOGEBRA
#O repositorio dá problemas → non se instala

#PSEINT
sudo rm -f *.tgz
wget https://sourceforge.net/projects/pseint/files/20230517/pseint-l64-20230517.tgz
sudo tar -xvzf *.tgz -C /opt/;
sudo chmod 755 -R /opt/pseint;
sudo rm -f /usr/bin/pseint;
sudo touch /usr/bin/pseint;
echo "#! /bin/bash" | sudo tee -a /usr/bin/pseint;
echo "/opt/pseint/./wxPSeInt" | sudo tee -a /usr/bin/pseint;
sudo chmod 755 /usr/bin/pseint;
sudo rm -f /usr/share/applications/pseint.desktop;		
sudo touch /usr/share/applications/pseint.desktop;
echo "[Desktop Entry]" | sudo tee -a /usr/share/applications/pseint.desktop;
echo "Comment=PSeInt - Editor e intérprete de pseudocódigo" | sudo tee -a /usr/share/applications/pseint.desktop;
echo "Encoding=UTF-8" | sudo tee -a /usr/share/applications/pseint.desktop;
echo "Name=Pseint" | sudo tee -a /usr/share/applications/pseint.desktop;
echo "Type=Application" | sudo tee -a /usr/share/applications/pseint.desktop;
echo "Categories=Development" | sudo tee -a /usr/share/applications/pseint.desktop;
echo "Icon=/opt/pseint/imgs/logo.png" | sudo tee -a /usr/share/applications/pseint.desktop;
echo "Exec=pseint" | sudo tee -a /usr/share/applications/pseint.desktop;
sudo chmod 755 /usr/share/applications/pseint.desktop;

#AVIDEMUX
sudo rm -rf /opt/avidemux;
sudo rm -f /usr/share/applications/avidemux.desktop;
sudo rm -f /usr/bin/avidemux;
sudo mkdir /opt/avidemux;
wget https://deac-ams.dl.sourceforge.net/project/avidemux/avidemux/2.8.1/avidemux_2.8.1.appImage;
sudo mv avidemux_2.8.1.appImage /opt/avidemux;
wget https://upload.wikimedia.org/wikipedia/commons/d/d9/Avidemux-logo.png;
sudo mv Avidemux-logo.png /opt/avidemux;
sudo ln -s /opt/avidemux/avidemux_2.8.1.appImage /usr/bin/avidemux;
sudo touch /opt/avidemux/avidemux.desktop;
echo "[Desktop Entry]" | sudo tee -a /opt/avidemux/avidemux.desktop;
echo "Comment=Editor de vídeo" | sudo tee -a /opt/avidemux/avidemux.desktop;
echo "Name=Avidemux" | sudo tee -a /opt/avidemux/avidemux.desktop;
echo "Type=Application" | sudo tee -a /opt/avidemux/avidemux.desktop;
echo "Categories=AudioVideo" | sudo tee -a /opt/avidemux/avidemux.desktop;
echo "Icon=/opt/avidemux/Avidemux-logo.png" | sudo tee -a /opt/avidemux/avidemux.desktop;
echo "Exec=avidemux" | sudo tee -a /opt/avidemux/avidemux.desktop;
sudo chmod 755 -R /opt/avidemux;
sudo cp -f /opt/avidemux/avidemux.desktop /usr/share/applications;

#PRUSASLICER
sudo rm -rf /opt/prusaslicer;
sudo rm -f /usr/share/applications/prusaslicer.desktop;
sudo rm -f /usr/bin/prusaslicer;
sudo mkdir /opt/prusaslicer;
wget https://github.com/prusa3d/PrusaSlicer/releases/download/version_2.6.1/PrusaSlicer-2.6.1+linux-x64-GTK2-202309060801.tar.bz2;
sudo mv Prusa*.tar.bz2 /opt/prusaslicer;
sudo tar -xf /opt/prusaslicer/Prusa*.tar.bz2 -C /opt/prusaslicer;
sudo mv /opt/prusaslicer/Prusa*/resources/icons/PrusaSlicer.png /opt/prusaslicer/prusaslicer.png;
sudo rm -rf /opt/prusaslicer/PrusaSlicer*;
wget https://github.com/prusa3d/PrusaSlicer/releases/download/version_2.6.1/PrusaSlicer-2.6.1+linux-x64-GTK2-202309060801.AppImage;
sudo mv PrusaSlicer-*.AppImage /opt/prusaslicer;
sudo chmod 755 -R /opt/prusaslicer;
sudo ln -s /opt/prusaslicer/PrusaSlicer-2.6.1+linux-x64-GTK2-202309060801.AppImage /usr/bin/prusaslicer;
sudo touch /opt/prusaslicer/prusaslicer.desktop;
echo "[Desktop Entry]" | sudo tee -a /opt/prusaslicer/prusaslicer.desktop;
echo "Comment=Software de laminación 3D" | sudo tee -a /opt/prusaslicer/prusaslicer.desktop;
echo "Name=PrusaSlicer" | sudo tee -a /opt/prusaslicer/prusaslicer.desktop;
echo "Type=Application" | sudo tee -a /opt/prusaslicer/prusaslicer.desktop;
echo "Categories=Education" | sudo tee -a /opt/prusaslicer/prusaslicer.desktop;
echo "Icon=/opt/prusaslicer/prusaslicer.png" | sudo tee -a /opt/prusaslicer/prusaslicer.desktop;
echo "Exec=prusaslicer" | sudo tee -a /opt/prusaslicer/prusaslicer.desktop;
sudo cp -f /opt/prusaslicer/prusaslicer.desktop /usr/share/applications;

#MUSESCORE
sudo rm -rf /opt/musescore;
sudo rm -f /usr/share/applications/musescore.desktop;
sudo rm -f /usr/bin/musescore;
sudo mkdir /opt/musescore;
wget https://cdn.jsdelivr.net/musescore/v4.1.1/MuseScore-4.1.1.232071203-x86_64.AppImage;
sudo mv MuseScore* /opt/musescore;
wget https://upload.wikimedia.org/wikipedia/commons/7/70/MuseScore_logo.png;
sudo mv MuseScore_logo.png /opt/musescore;
sudo chmod 755 -R /opt/musescore;
sudo ln -s /opt/musescore/MuseScore-4.1.1.232071203-x86_64.AppImage /usr/bin/musescore;
sudo touch /opt/musescore/musescore.desktop;
echo "[Desktop Entry]" | sudo tee -a /opt/musescore/musescore.desktop;
echo "Comment=Software de notación musical" | sudo tee -a /opt/musescore/musescore.desktop;
echo "Name=MuseScore" | sudo tee -a /opt/musescore/musescore.desktop;
echo "Type=Application" | sudo tee -a /opt/musescore/musescore.desktop;
echo "Categories=Education;AudioVideo;" | sudo tee -a /opt/musescore/musescore.desktop;
echo "Icon=/opt/musescore/MuseScore_logo.png" | sudo tee -a /opt/musescore/musescore.desktop;
echo "Exec=musescore" | sudo tee -a /opt/musescore/musescore.desktop;
sudo cp -f /opt/musescore/musescore.desktop /usr/share/applications;

#EXELEARNING
sudo rm -rf /opt/exelearning;
sudo rm -f /usr/share/applications/exelearning.desktop;
sudo rm -f /usr/bin/exelearning;
sudo mkdir /opt/exelearning;
wget https://github.com/exelearning/iteexe/releases/download/2.8.1/eXeLearning-2.8.1.glibc2.28-x86_64.AppImage;
sudo mv eXeLearning-2.8.1.glibc2.28-x86_64.AppImage /opt/exelearning;
wget https://exelearning.net/wp-content/uploads/2021/03/exelearning.png;
sudo mv exelearning.png /opt/exelearning;
sudo chmod 755 -R /opt/exelearning;
sudo ln -s /opt/exelearning/eXeLearning-2.8.1.glibc2.28-x86_64.AppImage /usr/bin/exelearning;
sudo touch /opt/exelearning/exelearning.desktop;
echo "[Desktop Entry]" | sudo tee -a /opt/exelearning/exelearning.desktop;
echo "Comment=The EXtremely Easy to use eLearning authoring tool" | sudo tee -a /opt/exelearning/exelearning.desktop;
echo "Name=eXeLearning" | sudo tee -a /opt/exelearning/exelearning.desktop;
echo "Type=Application" | sudo tee -a /opt/exelearning/exelearning.desktop;
echo "Categories=Education" | sudo tee -a /opt/exelearning/exelearning.desktop;
echo "Icon=/opt/exelearning/exelearning.png" | sudo tee -a /opt/exelearning/exelearning.desktop;
echo "Exec=exelearning" | sudo tee -a /opt/exelearning/exelearning.desktop;
sudo cp -f /opt/exelearning/exelearning.desktop /usr/share/applications;

#LUMI
wget https://github.com/Lumieducation/Lumi/releases/download/v0.10.0/lumi_0.10.0_amd64.deb;
sudo gdebi --non-interactive *.deb;



#ENGADIR USUARIO ADMINPC E ALUMNO
adduser adminpc
addgroup adminpc sudo
adduser alumnado
addgroup adminpc dialout
addgroup alumnado dialout

# scripts actualizar limpar batería arranxa_swap
# script de bloquear paneis e a súa icona
# script de arranxar paneis e a súa icona
# script poñer contrasinal ao grub
# Fluidsim_demo
# Crocodile Elementary
#LOCALES


#instalar xuntasans
#PENDENTE:
#detectar se o disco é ssd e en tal caso automatizar o trim
#bloquear o cartafol do alumno
#bloquear a instalación de complementos no firefox e no chrome
#script para arranxar cousas via github
#engadir o usuario alumno para que poida escribir datos polo porto usb
#controlador bi4id e dnie
#autofirma

